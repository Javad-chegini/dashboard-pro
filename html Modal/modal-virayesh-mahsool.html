<div class="modal fade" id="editProductModal" tabindex="-1" aria-labelledby="editProductModalLabel"><div class="modal-dialog modal-xl"><div class="modal-content"><div class="modal-header bg-warning text-dark"><h5 class="modal-title" id="editProductModalLabel"><i class="fas fa-edit me-2 icon-spacing"></i>ویرایش محصول </h5><button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button></div><div class="modal-body"><div class="card border-0 shadow-sm mb-4"><div class="card-header bg-light"><h6 class="mb-0"><i class="fas fa-search me-2 icon-spacing"></i>انتخاب محصول برای ویرایش</h6></div><div class="card-body"><div class="row"><div class="col-md-8"><label for="productSearchEdit" class="form-label">جستجو و انتخاب محصول</label><div class="input-group"><input type="text" class="form-control" id="productSearchEdit" placeholder="نام محصول، کد محصول یا برند را وارد کنید..."><button class="btn btn-outline-primary" type="button" onclick="searchProducts()"><i class="fas fa-search"></i></button></div></div><div class="col-md-4"><label for="productCategoryFilter" class="form-label">فیلتر دسته‌بندی</label><select class="form-select" id="productCategoryFilter" onchange="filterProductsByCategory()"><option value="">همه دسته‌ها</option><option value="electronics">لوازم الکترونیکی</option><option value="clothing">پوشاک</option><option value="home">خانه و آشپزخانه</option><option value="books">کتاب</option><option value="sports">ورزشی</option></select></div></div><div id="productListForEdit" class="mt-3" style="display: none;"><div class="table-responsive"><table class="table table-hover"><thead class="table-light"><tr><th>انتخاب</th><th>تصویر</th><th>نام محصول</th><th>کد</th><th>دسته‌بندی</th><th>قیمت</th><th>موجودی</th><th>وضعیت</th></tr></thead><tbody id="productTableBody"></tbody></table></div></div><div id="selectedProductInfo" class="mt-3 alert alert-info" style="display: none;"><i class="fas fa-info-circle me-2"></i><strong>محصول انتخاب شده:</strong><span id="selectedProductName"></span><button type="button" class="btn btn-sm btn-outline-secondary float-end" onclick="clearSelectedProduct()"><i class="fas fa-times"></i> تغییر محصول </button></div></div></div><div id="editProductForm" style="display: none;"><form id="productEditForm"><input type="hidden" id="editProductId"><div class="row"><div class="col-md-6"><div class="card border-0 shadow-sm mb-4"><div class="card-header bg-light"><h6 class="mb-0"><i class="fas fa-info-circle me-2 icon-spacing"></i>اطلاعات کلی</h6></div><div class="card-body"><div class="mb-3"><label for="editProductName" class="form-label">نام محصول *</label><input type="text" class="form-control" id="editProductName" required></div><div class="mb-3"><label for="editProductCode" class="form-label">کد محصول *</label><input type="text" class="form-control" id="editProductCode" required></div><div class="mb-3"><label for="editProductCategory" class="form-label">دسته‌بندی *</label><select class="form-select" id="editProductCategory" required><option value="">انتخاب کنید...</option><option value="electronics">لوازم الکترونیکی</option><option value="clothing">پوشاک</option><option value="home">خانه و آشپزخانه</option><option value="books">کتاب</option><option value="sports">ورزشی</option></select></div><div class="mb-3"><label for="editProductBrand" class="form-label">برند</label><input type="text" class="form-control" id="editProductBrand"></div></div></div></div><div class="col-md-6"><div class="card border-0 shadow-sm mb-4"><div class="card-header bg-light"><h6 class="mb-0"><i class="fas fa-dollar-sign me-2 icon-spacing"></i>قیمت و موجودی</h6></div><div class="card-body"><div class="mb-3"><label for="editProductPrice" class="form-label">قیمت (تومان) *</label><input type="text" class="form-control price-input" id="editProductPrice" required placeholder="مثال: 1,500,000"></div><div class="mb-3"><label for="editProductDiscountPrice" class="form-label">قیمت تخفیف خورده (تومان)</label><input type="text" class="form-control price-input" id="editProductDiscountPrice" placeholder="مثال: 1,200,000"></div><div class="mb-3"><label for="editProductStock" class="form-label">تعداد موجودی *</label><input type="number" class="form-control" id="editProductStock" required></div><div class="mb-3"><label for="editProductMinStock" class="form-label">حداقل موجودی هشدار</label><input type="number" class="form-control" id="editProductMinStock" value="10"></div></div></div></div></div><div class="row"><div class="col-md-8"><div class="card border-0 shadow-sm mb-4"><div class="card-header bg-light"><h6 class="mb-0"><i class="fas fa-edit me-2 icon-spacing"></i>توضیحات</h6></div><div class="card-body"><div class="mb-3"><label for="editProductDescription" class="form-label">توضیحات کامل محصول</label><textarea class="form-control" id="editProductDescription" rows="4"></textarea></div><div class="mb-3"><label for="editProductTags" class="form-label">برچسب‌ها (با کاما جدا کنید)</label><input type="text" class="form-control" id="editProductTags" placeholder="مثال: گوشی، اندروید، سامسونگ"></div></div></div></div><div class="col-md-4"><div class="card border-0 shadow-sm mb-4"><div class="card-header bg-light"><h6 class="mb-0"><i class="fas fa-image me-2 icon-spacing"></i>تصاویر و وضعیت</h6></div><div class="card-body"><div class="mb-3"><label class="form-label">تصویر فعلی</label><div id="currentProductImage" class="mb-2"></div><label for="editProductMainImage" class="form-label">تصویر جدید اصلی</label><input type="file" class="form-control" id="editProductMainImage" accept="image/*"></div><div class="mb-3"><label for="editProductGallery" class="form-label">گالری تصاویر جدید</label><input type="file" class="form-control" id="editProductGallery" accept="image/*" multiple></div><div class="mb-3"><label for="editProductStatus" class="form-label">وضعیت محصول</label><select class="form-select" id="editProductStatus"><option value="active">فعال</option><option value="inactive">غیرفعال</option><option value="draft">پیش‌نویس</option></select></div></div></div></div></div><div class="card border-0 shadow-sm mb-4"><div class="card-header bg-light"><h6 class="mb-0"><i class="fas fa-cogs me-2 icon-spacing"></i>مشخصات فنی</h6></div><div class="card-body"><div id="editSpecifications"></div><button type="button" class="btn btn-outline-success btn-sm mt-2" onclick="addEditSpecification()"><i class="fas fa-plus me-1"></i>افزودن مشخصه </button></div></div><div class="card border-0 shadow-sm"><div class="card-header bg-light"><h6 class="mb-0"><i class="fas fa-sliders-h icon-spacing"></i>تنظیمات اضافی</h6></div><div class="card-body"><div class="row"><div class="col-md-6"><div class="form-check form-switch"><input class="form-check-input" type="checkbox" id="editProductFeatured"><label class="form-check-label" for="editProductFeatured"> محصول ویژه </label></div></div><div class="col-md-6"><div class="form-check form-switch"><input class="form-check-input" type="checkbox" id="editProductDigital"><label class="form-check-label" for="editProductDigital"> محصول دیجیتال </label></div></div></div><div class="row mt-2"><div class="col-md-6"><div class="form-check form-switch"><input class="form-check-input" type="checkbox" id="editProductShipping"><label class="form-check-label" for="editProductShipping"> ارسال رایگان </label></div></div><div class="col-md-6"><div class="form-check form-switch"><input class="form-check-input" type="checkbox" id="editProductNotification"><label class="form-check-label" for="editProductNotification"> اطلاع‌رسانی موجودی </label></div></div></div><div class="row mt-3"><div class="col-12"><hr class="my-3"><h6 class="text-muted mb-3"><i class="fas fa-star me-2 text-warning"></i>جایگاه در سکشن اصلی سایت </h6></div></div><div class="row"><div class="col-md-6"><div class="form-check form-switch"><input class="form-check-input" type="checkbox" id="editProductMainSection" onchange="toggleEditMainSectionSettings()"><label class="form-check-label fw-bold" for="editProductMainSection"> نمایش در محصولات تاپ سایت </label></div></div></div><div id="editMainSectionSettings" class="mt-3" style="display: none;"><div class="card bg-light border"><div class="card-body"><div class="row"><div class="col-md-6"><label for="editProductPosition" class="form-label"><i class="fas fa-sort-numeric-down me-1"></i>رتبه نمایش </label><select class="form-select" id="editProductPosition"><option value="">انتخاب کنید...</option><option value="1">رتبه 1 (بالاترین اولویت)</option><option value="2">رتبه 2</option><option value="3">رتبه 3</option><option value="4">رتبه 4</option><option value="5">رتبه 5</option><option value="6">رتبه 6</option><option value="7">رتبه 7</option><option value="8">رتبه 8</option><option value="9">رتبه 9</option><option value="10">رتبه 10</option></select></div><div class="col-md-6"><label for="editProductSectionType" class="form-label"><i class="fas fa-tags me-1"></i>نوع سکشن </label><select class="form-select" id="editProductSectionType"><option value="top">محصولات برتر</option><option value="featured">محصولات ویژه</option><option value="new">جدیدترین محصولات</option><option value="bestseller">پرفروش‌ترین</option><option value="discount">با بیشترین تخفیف</option></select></div></div><div class="row mt-3"><div class="col-12"><label for="editProductDisplayNote" class="form-label"><i class="fas fa-sticky-note me-1"></i>یادداشت نمایش (اختیاری) </label><input type="text" class="form-control" id="editProductDisplayNote" placeholder="مثال: محصول جدید، پیشنهاد ویژه، ..."></div></div></div></div></div></div></div></form></div></div><div class="modal-footer"><button type="button" class="btn btn-secondary" data-bs-dismiss="modal"><i class="fas fa-times me-2"></i>لغو </button><button type="button" class="btn btn-outline-danger" id="deleteProductBtn" onclick="deleteProduct()" style="display: none;"><i class="fas fa-trash me-2"></i>حذف محصول </button><button type="button" class="btn btn-outline-primary" id="saveEditDraftBtn" onclick="saveEditProductDraft()" style="display: none;"><i class="fas fa-save me-2"></i>ذخیره به عنوان پیش‌نویس </button><button type="button" class="btn btn-warning" id="updateProductBtn" onclick="updateProduct()" style="display: none;"><i class="fas fa-check me-2"></i>به‌روزرسانی محصول </button></div></div></div></div>