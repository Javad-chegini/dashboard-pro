<!DOCTYPE html><html lang="fa" dir="rtl"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>سفارشات - پنل مدیریت</title><link rel="shortcut icon" href="../svg/admin-svgrepo-com.svg" type="image/pannel-icon"><link href="../css/bootstrap.min.css" rel="stylesheet"><link rel="stylesheet" href="../css/fontawesome/css/all.min.css"><link rel="stylesheet" href="../style.css"><link rel="stylesheet" href="./css/stat-cart.css"><link rel="stylesheet" href="css/filter.css"><link rel="stylesheet" href="css/didan-sefaresh.css"><style> /* استایل‌های اضافی برای کنترل نمودار */ .chart-container { position: relative; height: 200px !important; max-height: 200px !important; } #orderStatusChart { max-height: 200px !important; } .quick-actions.chart-section { height: 100%; min-height: 290px; max-height: 290px; overflow: hidden; } .sidebar .sidebar-nav li a { color: #fff !important; /* متن سفید */ display: flex; align-items: center; gap: 8px; /* فاصله بین آیکون و متن */ } /* آیکون‌ها هم سفید بشن */ .sidebar .sidebar-nav li a i { color: #fff !important; } /* حذف خطوط و بوردر بین آیتم‌ها */ .sidebar .sidebar-nav li { border-bottom: none !important; } /* وقتی روی آیتمی هوور می‌کنیم */ .sidebar .sidebar-nav li a:hover { background-color: rgba(255, 255, 255, 0.1); text-decoration: none; } /* آیتم فعال */ .sidebar .sidebar-nav li a.active { background-color: rgba(255, 255, 255, 0.2); font-weight: bold; } .sidebar { --bs-offcanvas-width: 250px; /* عرض سایدبار */ } @media (min-width: 1200px) { .sidebar { position: fixed; top: 0; right: 0; /* چون offcanvas-end استفاده می‌کنی */ bottom: 0; transform: none !important; visibility: visible !important; background-color: #0066cc; border-left: 1px solid rgba(255,255,255,0.1); } } .offcanvas-body { overflow-y: visible; } .offcanvas { z-index: 1045; } .offcanvas-backdrop { z-index: 1040; } .offcanvas-header{ height: 73px; } </style></head><body><div class="sidebar offcanvas offcanvas-end" tabindex="-1" id="offcanvasSidebar" aria-labelledby="offcanvasSidebarLabel" data-bs-backdrop="true" data-bs-scroll="false"><div class="offcanvas-header"><div class="logo w-100"><h3 id="offcanvasSidebarLabel"><img src="../svg/speed-svgrepo-com.svg" alt=""> پنل مدیریت</h3></div></div><div class="offcanvas-body p-0"><ul class="sidebar-nav"><li><a href="../index.html"><i class="fas fa-home"></i> داشبورد</a></li><li><a href="../USERS/index.html"><i class="fas fa-users"></i> کاربران</a></li><li><a href="../PRODUCT/index.html"><i class="fas fa-box"></i> محصولات</a></li><li><a href="#"class="active"><i class="fas fa-shopping-cart"></i> سفارشات</a></li><li><a href="../ANALITYCS/index.html"><i class="fas fa-chart-bar"></i> آمار و گزارش</a></li><li><a href="../MESSAGES/index.html"><i class="fas fa-envelope"></i> پیام‌ها</a></li><li><a href="../SETTING/index.html"><i class="fas fa-cog"></i> تنظیمات</a></li><li><a href="../PROFILE/index.html"><i class="fas fa-user"></i> پروفایل</a></li></ul></div></div><div class="main-content"><div class="header d-flex justify-content-between align-items-center"><div class="d-flex align-items-center"><button class="btn btn-outline-primary me-3 d-block d-custom-none icon-spacing" id="sidebarToggle" data-bs-toggle="offcanvas" data-bs-target="#offcanvasSidebar"><i class="fas fa-bars"></i></button><h2>سفارشات</h2></div><div class="d-flex align-items-center"><span class="me-3 title-hide">خوش آمدید، مدیر</span><div class="dropdown x"><button class="btn btn-outline-primary dropdown-toggle" type="button" data-bs-toggle="dropdown"><i class="fas fa-user"></i></button><ul class="dropdown-menu dropdown-menu-end text-end"><li><a class="dropdown-item text-end" href="#"><i class="fas fa-user ms-2"></i> پروفایل</a></li><li><a class="dropdown-item text-end" href="#"><i class="fas fa-cog ms-2"></i> تنظیمات</a></li><li><hr class="dropdown-divider"></li><li><a class="dropdown-item text-end" href="#"><i class="fas fa-sign-out-alt ms-2"></i> خروج</a></li></ul></div></div></div><div class="container-fluid px-4"><div class="filter-section mb-4"><div class="row g-3"><div class="col-lg-4 col-md-6"><div class="search-box"><input type="text" class="form-control search-input" placeholder="جستجو بر اساس شماره سفارش، نام مشتری..."><button class="search-btn" type="button"><i class="fas fa-search"></i></button></div></div><div class="col-lg-2 col-md-6"><select class="form-select status-select"><option value="">همه وضعیت‌ها</option><option value="pending">در انتظار تایید</option><option value="processing">در حال پردازش</option><option value="shipping">آماده ارسال</option><option value="shipped">ارسال شده</option><option value="delivered">تحویل شده</option><option value="cancelled">لغو شده</option></select></div><div class="col-lg-2 col-md-4"><div class="date-picker-wrapper"><input type="text" class="form-control date-picker" id="fromDate" placeholder="از تاریخ"><i class="fas fa-calendar-alt date-icon"></i></div></div><div class="col-lg-2 col-md-4"><div class="date-picker-wrapper"><input type="text" class="form-control date-picker" id="toDate" placeholder="تا تاریخ"><i class="fas fa-calendar-alt date-icon"></i></div></div><div class="col-lg-2 col-md-4"><div class="d-flex gap-2"><button class="btn btn-primary flex-fill filter-btn"><i class="fas fa-filter"></i> اعمال فیلتر </button><button class="btn btn-outline-secondary reset-btn" title="پاک کردن فیلترها"><i class="fas fa-redo"></i></button></div></div></div><div class="active-filters mt-3" style="display: none;"><span class="filters-label">فیلترهای فعال:</span><span class="filter-tag"> در انتظار تایید <button class="remove-filter" data-filter="status">×</button></span><span class="filter-tag"> از: 1403/6/20 <button class="remove-filter" data-filter="fromDate">×</button></span><button class="btn btn-link btn-sm clear-all">پاک کردن همه</button></div></div><div class="table-card"><div class="d-flex justify-content-between align-items-center mb-3"><h5><img src="../svg/menu-svgrepo-com.svg" alt="آیکون-منو"> لیست سفارشات</h5><div><button class="btn btn-success btn-sm me-2"><i class="fas fa-file-excel"></i> خروجی Excel </button><button class="btn btn-info btn-sm"><i class="fas fa-print"></i> چاپ </button></div></div><div class="table-responsive"><table class="table table-hover"><thead><tr><th><input type="checkbox" class="form-check-input" id="selectAll"></th><th>شماره سفارش</th><th>نام مشتری</th><th>تاریخ ثبت</th><th>محصولات</th><th>مبلغ کل</th><th>روش پرداخت</th><th>وضعیت</th><th>عملیات</th></tr></thead><tbody><tr><td><input type="checkbox" class="form-check-input"></td><td>#12458</td><td><div class="d-flex align-items-center"><img src="../img/20250915_230657_1541433243.jpg" class="rounded-circle me-2" width="40"><div><strong>علی احمدی</strong><br><small class="text-muted">09121234567</small></div></div></td><td>1403/6/25<br><small class="text-muted">14:30</small></td><td><span class="badge bg-secondary">3 آیتم</span></td><td class="text-success fw-bold">15,250,000 تومان</td><td><i class="fas fa-credit-card text-primary"></i> آنلاین</td><td><span class="badge bg-warning">در انتظار تایید</span></td><td><button class="btn btn-sm btn-outline-primary" title="مشاهده جزئیات"><i class="fas fa-eye"></i></button><button class="btn btn-sm btn-outline-success" title="تایید سفارش"><i class="fas fa-check"></i></button><button class="btn btn-sm btn-outline-danger" title="لغو سفارش"><i class="fas fa-times"></i></button></td></tr><tr><td><input type="checkbox" class="form-check-input"></td><td>#12457</td><td><div class="d-flex align-items-center"><img src="../img/20250915_230935_1201834945.jpg" class="rounded-circle me-2" width="40"><div><strong>فاطمه رضایی</strong><br><small class="text-muted">09357654321</small></div></div></td><td>1403/6/25<br><small class="text-muted">12:15</small></td><td><span class="badge bg-secondary">1 آیتم</span></td><td class="text-success fw-bold">8,500,000 تومان</td><td><i class="fas fa-money-bill text-success"></i> نقدی</td><td><span class="badge bg-info">در حال پردازش</span></td><td><button class="btn btn-sm btn-outline-primary" title="مشاهده جزئیات"><i class="fas fa-eye"></i></button><button class="btn btn-sm btn-outline-warning" title="ویرایش"><i class="fas fa-edit"></i></button><button class="btn btn-sm btn-outline-info" title="چاپ فاکتور"><i class="fas fa-print"></i></button></td></tr><tr><td><input type="checkbox" class="form-check-input"></td><td>#12456</td><td><div class="d-flex align-items-center"><img src="../img/20250915_231046_1754802224.jpg" class="rounded-circle me-2" width="40"><div><strong>محمد حسینی</strong><br><small class="text-muted">09189876543</small></div></div></td><td>1403/6/24<br><small class="text-muted">18:45</small></td><td><span class="badge bg-secondary">5 آیتم</span></td><td class="text-success fw-bold">32,750,000 تومان</td><td><i class="fas fa-credit-card text-primary"></i> آنلاین</td><td><span class="badge bg-success">ارسال شده</span></td><td><button class="btn btn-sm btn-outline-primary" title="مشاهده جزئیات"><i class="fas fa-eye"></i></button><button class="btn btn-sm btn-outline-info" title="رهگیری مرسوله"><i class="fas fa-map-marker-alt"></i></button><button class="btn btn-sm btn-outline-success" title="تایید تحویل"><i class="fas fa-check-double"></i></button></td></tr></tbody></table></div><div class="d-flex justify-content-between align-items-center mt-3"><div><span class="text-muted">نمایش 1 تا 10 از 245 سفارش</span></div><nav><ul class="pagination mb-0"><li class="page-item disabled"><a class="page-link" href="#"><i class="fas fa-chevron-right"></i></a></li><li class="page-item active"><a class="page-link" href="#">1</a></li><li class="page-item"><a class="page-link" href="#">2</a></li><li class="page-item"><a class="page-link" href="#">3</a></li><li class="page-item"><a class="page-link" href="#"><i class="fas fa-chevron-left"></i></a></li></ul></nav></div></div><div class="row mt-4"><div class="col-lg-6 mb-3"><div class="quick-actions"><h5><img src="../svg/bolt-fill-svgrepo-com.svg" alt="آیکون-سریع" class="icon-spacing"> عملیات گروهی</h5><div class="row g-2"><div class="col-6"><button class="btn btn-outline-success quick-action-btn"><i class="fas fa-check-circle"></i> تایید انتخاب شده‌ها </button></div><div class="col-6"><button class="btn btn-outline-danger quick-action-btn"><i class="fas fa-times-circle"></i> لغو انتخاب شده‌ها </button></div><div class="col-6"><button class="btn btn-outline-info quick-action-btn"><i class="fas fa-print"></i> چاپ فاکتور گروهی </button></div><div class="col-6"><button class="btn btn-outline-warning quick-action-btn"><i class="fas fa-file-export"></i> خروجی PDF </button></div></div></div></div><div class="col-lg-6 mb-3"><div class="quick-actions chart-section"><h5><i class="fas fa-chart-pie"></i> آمار سریع</h5><div class="chart-container"><canvas id="orderStatusChart"></canvas></div></div></div></div></div></div><div class="modal fade" id="orderDetailsModal" tabindex="-1" aria-labelledby="orderDetailsModalLabel" aria-hidden="true"><div class="modal-dialog modal-lg modal-dialog-centered modal-dialog-scrollable"><div class="modal-content"><div class="modal-header bg-primary text-white"><h5 class="modal-title" id="orderDetailsModalLabel"><i class="fas fa-file-invoice me-2"></i> جزئیات سفارش <span id="modalOrderNumber">#12458</span></h5><button type="button" class="btn-close btn-close-white position-absolute top-0 start-0 m-2" data-bs-dismiss="modal" aria-label="Close"></button></div><div class="modal-body"><div class="row mb-4"><div class="col-md-6"><div class="info-card"><h6 class="text-primary mb-3"><i class="fas fa-user me-2 icon-spacing"></i>اطلاعات مشتری</h6><div class="customer-info d-flex align-items-center mb-3"><img src="../img/20250915_230657_1541433243.jpg" class="rounded-circle me-3" width="60" height="60"><div><h6 class="mb-1">علی احمدی</h6><div class="text-muted small"><i class="fas fa-phone me-1 icon-spacing"></i>09121234567<br><i class="fas fa-envelope me-1 icon-spacing"></i>ali.ahmadi@email.com </div></div></div></div></div><div class="col-md-6"><div class="info-card"><h6 class="text-primary mb-3"><i class="fas fa-shipping-fast me-2 icon-spacing"></i>اطلاعات ارسال</h6><p class="mb-1"><strong>آدرس:</strong> تهران، خیابان ولیعصر، پلاک 123</p><p class="mb-1"><strong>کد پستی:</strong> 1234567890</p><p class="mb-0"><strong>روش ارسال:</strong> پست پیشتاز</p></div></div></div><div class="order-info-section mb-4"><h6 class="text-primary mb-3"><i class="fas fa-info-circle me-2 icon-spacing"></i>اطلاعات سفارش</h6><div class="row"><div class="col-6 col-md-3 mb-3"><div class="text-center"><div class="info-badge bg-light"><i class="fas fa-calendar-alt text-primary"></i></div><small class="text-muted d-block">تاریخ ثبت</small><strong>1403/6/25</strong></div></div><div class="col-6 col-md-3 mb-3"><div class="text-center"><div class="info-badge bg-light"><img src="../svg/clock-circle-svgrepo-com.svg" alt=""></div><small class="text-muted d-block">ساعت ثبت</small><strong>14:30</strong></div></div><div class="col-6 col-md-3 mb-3"><div class="text-center"><div class="info-badge bg-light"><img src="../svg/payment-card-svgrepo-com.svg" alt=""></div><small class="text-muted d-block">روش پرداخت</small><strong>آنلاین</strong></div></div><div class="col-6 col-md-3 mb-3"><div class="text-center"><div class="info-badge bg-light"><img src="../svg/delivery-truck-cargo-logistics-svgrepo-com.svg" alt=""></div><small class="text-muted d-block">وضعیت</small><span class="badge bg-warning">در انتظار تایید</span></div></div></div></div><div class="products-section mb-4"><h6 class="text-primary mb-3"><i class="fas fa-shopping-cart me-2 icon-spacing"></i>محصولات سفارش</h6><div class="table-responsive"><table class="table table-sm table-hover"><thead class="table-light"><tr><th>تصویر</th><th>نام محصول</th><th>تعداد</th><th>قیمت واحد</th><th>قیمت کل</th></tr></thead><tbody><tr><td><img src="../img/a75a48fda23ca041993e51beb3598ce8490890d5_1754236726.jpg" width="40" height="40" class="rounded"></td><td>لپ تاپ ASUS مدل X515</td><td>1</td><td>12,000,000 تومان</td><td class="text-success fw-bold">12,000,000 تومان</td></tr><tr><td><img src="../img/M991 RGB 1.webp" width="40" height="40" class="rounded"></td><td>موس بی‌سیم Logitech</td><td>2</td><td>250,000 تومان</td><td class="text-success fw-bold">500,000 تومان</td></tr><tr><td><img src="../img/10853588.jpg" width="40" height="40" class="rounded"></td><td>کیبورد مکانیکال Razer</td><td>1</td><td>2,750,000 تومان</td><td class="text-success fw-bold">2,750,000 تومان</td></tr></tbody></table></div></div><div class="financial-summary"><div class="row"><div class="col-md-6 offset-md-6"><div class="summary-box"><div class="d-flex justify-content-between mb-2"><span>جمع کل:</span><span>15,250,000 تومان</span></div><div class="d-flex justify-content-between mb-2"><span>تخفیف:</span><span class="text-danger">-500,000 تومان</span></div><div class="d-flex justify-content-between mb-2"><span>هزینه ارسال:</span><span>50,000 تومان</span></div><div class="d-flex justify-content-between mb-2"><span>مالیات:</span><span>1,372,500 تومان</span></div><hr><div class="d-flex justify-content-between"><strong>مبلغ نهایی:</strong><strong class="text-success fs-5">16,172,500 تومان</strong></div></div></div></div></div><div class="status-history mt-4"><h6 class="text-primary mb-3"><i class="fas fa-history me-2 icon-spacing"></i>تاریخچه وضعیت</h6><div class="timeline"><div class="timeline-item"><div class="timeline-marker bg-warning"></div><div class="timeline-content"><small class="text-muted">1403/6/25 - 14:30</small><p class="mb-0">سفارش ثبت شد - در انتظار تایید</p></div></div></div></div></div><div class="modal-footer"><button type="button" class="btn btn-secondary" data-bs-dismiss="modal">بستن</button><button type="button" class="btn btn-info"><i class="fas fa-print me-2"></i>چاپ</button><button type="button" class="btn btn-success"><i class="fas fa-check me-2"></i>تایید سفارش</button></div></div></div></div><script src="./js/jquery-3.6.0.min.js"></script><script src="../js/bootstrap.bundle.min.js"></script><script src="https://cdn.jsdelivr.net/npm/chart.js"></script><script src="js/filter.js"></script><link rel="stylesheet" href="./css/persian-datepicker.min.css"><script src="https://unpkg.com/persian-date@1.1.0/dist/persian-date.min.js"></script><script src="./js/persian-datepicker.min.js"></script><script> // app-init.js - کامل و درست (function() { 'use strict'; // متغیرهای سراسری window.appGlobals={ orderStatusChartInstance: null, revenueChartInstance: null, }; document.addEventListener('DOMContentLoaded', function() { // بررسی وجود کتابخانه‌های مورد نیاز const hasJQuery=typeof $ !=='undefined'; const hasChart=typeof Chart !=='undefined'; const hasBootstrap=typeof bootstrap !=='undefined'; const hasPersianDatepicker=hasJQuery && $.fn.persianDatepicker; // نمایش وضعیت کتابخانه‌ها در کنسول console.log('کتابخانه‌های بارگذاری شده:', { jQuery: hasJQuery, ChartJS: hasChart, Bootstrap: hasBootstrap, PersianDatepicker: hasPersianDatepicker }); // Sidebar initialization if (document.querySelector('.sidebar')) { initializeSidebar(); } // Charts initialization if (hasChart) { initializeCharts(); } else { console.error('Chart.js بارگذاری نشده است!'); } // Persian Datepicker initialization if (hasPersianDatepicker) { initializeDatepickers(); } // Other UI elements initializeUIElements(); }); function initializeSidebar() { const sidebar=document.querySelector('.sidebar'); const sidebarToggle=document.getElementById('sidebarToggle'); if (sidebarToggle && sidebar) { sidebarToggle.addEventListener('click', function() { sidebar.classList.toggle('show'); }); } } function initializeCharts() { // Order Status Chart - کد کامل const orderStatusCanvas=document.getElementById('orderStatusChart'); if (orderStatusCanvas) { // نابودی نمودار قبلی در صورت وجود if (window.appGlobals.orderStatusChartInstance) { window.appGlobals.orderStatusChartInstance.destroy(); } const ctx=orderStatusCanvas.getContext('2d'); // داده‌های نمودار const orderStatusData={ labels: ['در انتظار تایید', 'در حال پردازش', 'ارسال شده', 'تحویل شده', 'لغو شده'], datasets: [{ label: 'تعداد سفارشات', data: [45, 128, 72, 186, 23], backgroundColor: [ '#f59e0b', // نارنجی - در انتظار '#06b6d4', // آبی فیروزه‌ای - در حال پردازش '#3b82f6', // آبی - ارسال شده '#10b981', // سبز - تحویل شده '#ef4444' // قرمز - لغو شده ], borderColor: [ '#d97706', '#0891b2', '#1d4ed8', '#059669', '#dc2626' ], borderWidth: 2, hoverBorderWidth: 3, hoverOffset: 10 }] }; // تنظیمات نمودار const orderStatusOptions={ responsive: true, maintainAspectRatio: false, plugins: { legend: { position: 'bottom', labels: { padding: 20, usePointStyle: true, pointStyle: 'circle', font: { family: 'IRANSans, Vazir, Tahoma', size: 12, weight: '500' }, color: '#374151' } }, tooltip: { enabled: true, backgroundColor: 'rgba(0, 0, 0, 0.8)', titleColor: '#fff', bodyColor: '#fff', cornerRadius: 8, padding: 12, titleFont: { family: 'IRANSans, Vazir, Tahoma', size: 14, weight: 'bold' }, bodyFont: { family: 'IRANSans, Vazir, Tahoma', size: 13 }, callbacks: { label: function(context) { const total=context.dataset.data.reduce((sum, value)=> sum + value, 0); const percentage=((context.parsed / total) * 100).toFixed(1); return `${context.label}: ${context.parsed} سفارش (${percentage}%)`; } } } }, animation: { animateRotate: true, animateScale: true, duration: 1000, easing: 'easeOutQuart' }, elements: { arc: { borderJoinStyle: 'round' } } }; // ایجاد نمودار try { window.appGlobals.orderStatusChartInstance=new Chart(ctx, { type: 'doughnut', data: orderStatusData, options: orderStatusOptions }); console.log('✅ نمودار وضعیت سفارشات با موفقیت ایجاد شد'); } catch (error) { console.error('❌ خطا در ایجاد نمودار:', error); } } else { console.error('❌ المنت canvas با id="orderStatusChart" یافت نشد!'); } // Revenue Chart - اضافی initializeRevenueChart(); } function initializeRevenueChart() { const revenueCanvas=document.getElementById('revenueChart'); if (revenueCanvas) { if (window.appGlobals.revenueChartInstance) { window.appGlobals.revenueChartInstance.destroy(); } const ctx=revenueCanvas.getContext('2d'); const revenueData={ labels: ['فروردین', 'اردیبهشت', 'خرداد', 'تیر', 'مرداد', 'شهریور'], datasets: [{ label: 'درآمد (میلیون تومان)', data: [12, 19, 15, 25, 22, 30], borderColor: '#3b82f6', backgroundColor: 'rgba(59, 130, 246, 0.1)', borderWidth: 3, fill: true, tension: 0.4, pointBackgroundColor: '#3b82f6', pointBorderColor: '#ffffff', pointBorderWidth: 2, pointRadius: 6, pointHoverRadius: 8 }] }; const revenueOptions={ responsive: true, maintainAspectRatio: false, plugins: { legend: { display: false } }, scales: { y: { beginAtZero: true, ticks: { font: { family: 'IRANSans, Vazir, Tahoma' } } }, x: { ticks: { font: { family: 'IRANSans, Vazir, Tahoma' } } } } }; try { window.appGlobals.revenueChartInstance=new Chart(ctx, { type: 'line', data: revenueData, options: revenueOptions }); console.log('✅ نمودار درآمد با موفقیت ایجاد شد'); } catch (error) { console.error('❌ خطا در ایجاد نمودار درآمد:', error); } } } function initializeDatepickers() { $('.persian-datepicker, .datepicker').each(function() { const $el=$(this); if (!$el.data('datepicker')) { $el.persianDatepicker({ format: 'YYYY/MM/DD', autoClose: true, responsive: true, initialValue: false, calendar: { persian: { locale: 'fa', showHint: true } } }); } }); } function initializeUIElements() { // Select All Checkbox const selectAllCheckbox=document.getElementById('selectAll'); if (selectAllCheckbox) { selectAllCheckbox.addEventListener('change', function() { const checkboxes=document.querySelectorAll('tbody input[type="checkbox"]'); checkboxes.forEach(checkbox=> checkbox.checked=this.checked); }); } // Order Details Buttons document.querySelectorAll('.btn-outline-primary[title="مشاهده جزئیات"]').forEach(button=> { button.addEventListener('click', function() { const row=this.closest('tr'); const orderId=row.querySelector('td:nth-child(2)').textContent; showOrderDetails(orderId); }); }); } // تابع کمکی برای نمایش جزئیات سفارش function showOrderDetails(orderId) { console.log('نمایش جزئیات سفارش:', orderId); // اینجا کد نمایش مودال یا صفحه جزئیات } })(); </script></body></html>